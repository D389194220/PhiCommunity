(()=>{"use strict";var e={153:(e,t,n)=>{e.exports=n.p+"assets/Start.mp3"},339:(e,t,n)=>{e.exports=n.p+"assets/selectSongItem.mp3"}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,n),c.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../"})(),(()=>{const e={ez:0,hd:1,in:2,at:3};var t=n(339);function o(t,n,o,{level:i,onClick:c}){const s=document.createElement("div");s.classList.add("songItemContainer");const a=function(e,t){const n=document.createElement("div");return n.classList.add("songItem"),n.setAttribute("data-artist",e.artist),n.setAttribute("data-codename",t),n.innerText=e.name,n}(n,o),r=function(e,t="ez"){const n=document.createElement("div");return n.classList.add("level"),o(t),{element:n,switchLevel:o};function o(t){n.classList.remove("ez","hd","in","at"),n.classList.add(t),n.setAttribute("data-level",Math.floor(e[t+"Ranking"]||e.ezRanking||e.hdRanking||e.inRanking||e.atRanking||0))}}(n,i);return s.appendChild(a),s.appendChild(r.element),s.addEventListener("click",(()=>c(t))),{element:s,songMeta:n,codename:o,select:()=>{a.classList.add("selected"),s.classList.add("selected");for(const t in e)document.querySelector(`div.levelItem.${t}`).classList.remove("disabled"),null==n["chart"+t.toUpperCase()]&&(document.querySelector(`div.levelItem.${t}`).classList.add("disabled"),document.querySelector(`div.levelItem.${t}`).classList.remove("selected")),document.querySelector(`div.levelItem.${t}`).setAttribute("data-level",Math.floor(n[t+"Ranking"]||n.ezRanking||n.hdRanking||n.inRanking||n.atRanking||0))},unSelect:()=>{a.classList.remove("selected"),s.classList.remove("selected")},switchLevel:r.switchLevel}}var i=n(153);const c=function({defaultLevel:n="ez"}){const i=document.createElement("div");i.id="songList",i.classList.add("songList");const c=[];let s,a=n;return{element:i,items:c,createSong:function(e,t,n){const s=new o(c.length,t,n,{onClick:r,level:a});i.appendChild(s.element),c[e]=s},switchSong:r,switchLevel:l,setOrder:function(e){switch(e){case"level":d(((e,t)=>e.songMeta[`${a}Ranking`]<t.songMeta[`${a}Ranking`]?1:-1));break;case"name":d(((e,t)=>e.songMeta.name>t.songMeta.name?1:-1));break;default:c.forEach((({element:e})=>e.style.order=""))}}};function r(n){if(n===s)return;document.querySelector("#loadingBar").classList.remove("hidden"),fetch(t).then((e=>e.arrayBuffer())).then((e=>{const t=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext);t.decodeAudioData(e,(function(e){var n=t.createBufferSource();n.buffer=e,n.loop=!1,n.connect(t.destination),n.start(0)}))})),void 0!==s&&c[s].unSelect(),i.classList.selected||i.classList.add("selected"),c[n].select(),console.log("Song",n,"Selected");const{songMeta:o,codename:a}=c[n];for(var r=window.levelSelected||["ez"];null==o["chart"+r[0].toUpperCase()];){var d=e[r[0]]+1;4==d&&(d=0);var u=Object.keys(e)[d];console.log("Chart of level",r[0],"is NULL! Switching to next level: ",u),document.querySelector(`div.levelItem.${r[0]}`).classList.add("disabled"),document.querySelector(`div.levelItem.${r[0]}`).classList.remove("selected"),l(u.match(u)),document.querySelector(`div.levelItem.${u}`).classList.add("selected"),document.querySelectorAll("#songList > div.songItemContainer.selected > div.level").forEach((e=>{e.classList.remove(r[0]),e.classList.add(u)})),r=[u]}fetch(`https://charts.phicommunity.com.cn/${a}/${o.illustration}`).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);document.children[0].setAttribute("style",`--background: url(${t});`),document.querySelector("img.illustration").src=t})).catch((e=>{console.err("获取曲绘失败!",`url: https://charts.phicommunity.com.cn/${a}/${o.illustration}`,e)})),fetch(`https://charts.phicommunity.com.cn/${a}/${o.musicFile}`).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);try{window.playSongXHRObj.abort()}catch(e){}fetch(t).then((e=>e.arrayBuffer())).then((e=>{const t=window.slicesAudioContext.createGain();window.slicesAudioContext.decodeAudioData(e,(function(e){try{window.sliceAudioContextSource.stop()}catch(e){}window.sliceAudioContextSource=window.slicesAudioContext.createBufferSource(),window.sliceAudioContextSource.buffer=e,window.sliceAudioContextSource.connect(t),t.connect(window.slicesAudioContext.destination),window.sliceAudioContextSource.start(0,o.sliceAudioStart),t.gain.setValueAtTime(.01,window.slicesAudioContext.currentTime),t.gain.linearRampToValueAtTime(1,window.slicesAudioContext.currentTime+1),clearInterval(window.sliceAudioInterval),window.sliceAudioInterval=setInterval((()=>{t.gain.linearRampToValueAtTime(.01,window.slicesAudioContext.currentTime+1),setTimeout((()=>{window.sliceAudioContextSource.stop(),window.sliceAudioContextSource=window.slicesAudioContext.createBufferSource(),window.sliceAudioContextSource.buffer=e,window.sliceAudioContextSource.connect(t),window.sliceAudioContextSource.start(0,o.sliceAudioStart),t.gain.linearRampToValueAtTime(1,window.slicesAudioContext.currentTime+1)}),500)}),15e3)})),document.querySelector("#loadingBar").classList.add("hidden")}))})).catch((e=>{console.err("获取歌曲失败!",`url: https://charts.phicommunity.com.cn/${a}/${o.musicFile}`,e)})),s=n}function l(e){a!==e&&(window.levelSelected=e,c.forEach((({switchLevel:t})=>t(e))),a=e)}function d(e){[...c].sort(((t,n)=>e(t,n))).forEach((({element:e},t)=>{e.style.order=t}))}}({defaultLevel:"ez"});function s(e){const t=e;try{document.querySelector("div.levelItem.selected").classList.add("fadeOut")}catch(t){}setTimeout((()=>{try{document.querySelector("div.levelItem.selected").classList.remove("selected")}catch(e){}t.target.classList.add("fadeIn"),t.target.classList.add("selected")}),300);const n=t.target.classList.toString();c.switchLevel(n.match(/ez|hd|in|at/));const o=document.querySelectorAll("div.levelItem.fadeIn");for(let e=0;e<o.length;e++)o[e].classList.remove("fadeIn");const i=document.querySelectorAll("div.levelItem.fadeOut");for(let e=0;e<o.length;e++)i[e].classList.remove("fadeOut")}window.addEventListener("DOMContentLoaded",(()=>{let e=document.createElement("iframe");e.src="../loadingScreen/index.html",e.classList.add("loadingEmbedFrame"),document.body.appendChild(e);const t=[["default","默认"],["level","难度"],["name","名称"]];document.querySelector("div.settingBtn").addEventListener("click",(()=>{location.href="../settings/index.html"})),document.querySelector("div#avatarBar").addEventListener("click",(e=>{var t=e.target;null==t.classList.toString().match("avatarBar")&&(t=e.target.parentElement),t.classList.toString().match("expand")?t.classList.remove("expand"):t.classList.add("expand")})),null!=window.localStorage.getItem("playerName")&&(console.log("Setting player name: ",window.localStorage.getItem("playerName")),document.querySelector("div#avatarBar").setAttribute("data-name",window.localStorage.getItem("playerName"))),window.chapterName=new URLSearchParams(new URL(location.href).search).get("c"),fetch("https://api.github.com/repos/HanHan233/PhiCommunity-Charts-Repo/contents").then((e=>e.json())).then((n=>{window.songCodeNameList=new Array;for(let e=0;e<n.length;e++)null==n[e].name.match(/.github|README.md|CNAME|_headers/)&&window.songCodeNameList.push(n[e].name);window.songMetaList=new Array;for(let e=0;e<window.songCodeNameList.length;e++)fetch(encodeURI("https://charts.phicommunity.com.cn/"+window.songCodeNameList[e]+"/meta.json")).then((e=>e.json())).then((e=>{window.songMetaList.push(e)}));const o=setInterval((()=>{if(window.songMetaList.length==window.songCodeNameList.length){const n=c.element;document.getElementsByClassName("leftArea")[0].appendChild(n);for(let e=0;e<window.songMetaList.length;e++)c.createSong(e,window.songMetaList[e],window.songMetaList[e].codename);let i=0;document.querySelector("div.sortMode").innerText=t[0][1],document.querySelector("div.sortMode").addEventListener("click",(e=>{i=(i+1)%t.length,c.setOrder(t[i][0]),e.target.innerText=t[i][1]})),window.slicesAudioContext=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext),c.switchSong(0),e.remove(),document.querySelector("#rightArea").style.setProperty("--scale",Math.round(window.devicePixelRatio)/3.5),clearInterval(o)}}),100)})).catch((()=>{alert("曲目列表获取失败！")}))})),document.querySelectorAll("div.levelItem").forEach((e=>e.addEventListener("click",s))),document.querySelector("div.playBtn").addEventListener("click",(()=>{clearInterval(window.sliceAudioInterval);try{window.sliceAudioContextSource.stop()}catch(e){}document.querySelector("#readyToLoadOverlay").classList.add("go"),fetch(i).then((e=>e.arrayBuffer())).then((e=>{const t=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext);t.decodeAudioData(e,(function(e){var n=t.createBufferSource();n.buffer=e,n.loop=!1,n.connect(t.destination),n.start(0)}))})),setTimeout((()=>{location.href="../whilePlaying/index.html?play="+document.querySelector("div.songItem.selected").getAttribute("data-codename")+"&l="+window.levelSelected}),2e3)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvc29uZ1NlbGVjdC4xNDAyNzQ2NDIxODM0N2Q1OWIxNS5qcyIsIm1hcHBpbmdzIjoib0lBQ0lBLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLElBT1YsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxRQ3JCZkosRUFBb0JPLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsR0FDZCxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxRQUxqQixHLE1DQXhCLElBQUlDLEVBQ0FiLEVBQW9CTyxFQUFFTyxnQkFBZUQsRUFBWWIsRUFBb0JPLEVBQUVRLFNBQVcsSUFDdEYsSUFBSUMsRUFBV2hCLEVBQW9CTyxFQUFFUyxTQUNyQyxJQUFLSCxHQUFhRyxJQUNiQSxFQUFTQyxnQkFDWkosRUFBWUcsRUFBU0MsY0FBY0MsTUFDL0JMLEdBQVcsQ0FDZixJQUFJTSxFQUFVSCxFQUFTSSxxQkFBcUIsVUFDekNELEVBQVFFLFNBQVFSLEVBQVlNLEVBQVFBLEVBQVFFLE9BQVMsR0FBR0gsS0FLN0QsSUFBS0wsRUFBVyxNQUFNLElBQUlTLE1BQU0seURBQ2hDVCxFQUFZQSxFQUFVVSxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUNwRnZCLEVBQW9Cd0IsRUFBSVgsRUFBWSxPLFNDZjdCLE1BQU1ZLEVBQWEsQ0FDekJDLEdBQUksRUFDSkMsR0FBSSxFQUNKQyxHQUFJLEVBQ0pDLEdBQUksRyxhQ3dPTCxTQUFTQyxFQUFjQyxFQUFPQyxFQUFVQyxHQUFVLE1BQUVDLEVBQUssUUFBRUMsSUFDMUQsTUFBTUMsRUFBWXBCLFNB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QWdCTixHQUFhLFNBQVVPLEdBQzNDLElBQUlDLEVBQVNQLEVBQUtRLHFCQUNsQkQsRUFBT0QsT0FBU0EsRUFDaEJDLEVBQU9FLE1BQU8sRUFDZEYsRUFBT0csUUFBUVYsRUFBS1csYUFDcEJKLEVBQU9LLE1BQU0sU0FHaEJrQyxZQUFXLEtBQ1ZoSCxTQUFTZ0ksS0FDUixtQ0FDQS9ILFNBQ0UyQyxjQUFjLHlCQUNkNkcsYUFBYSxpQkFDZixNQUNBNUosT0FBT3FGLGdCQUNOLFMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waGktY29tbXVuaXR5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3BoaS1jb21tdW5pdHkvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9waGktY29tbXVuaXR5L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3BoaS1jb21tdW5pdHkvLi9zcmMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3BoaS1jb21tdW5pdHkvLi9zcmMvc29uZ1NlbGVjdC9Tb25nTGlzdC5qcyIsIndlYnBhY2s6Ly9waGktY29tbXVuaXR5Ly4vc3JjL3NvbmdTZWxlY3QvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybCArIFwiLi4vXCI7IiwiZXhwb3J0IGNvbnN0IGdhbWVMZXZlbHMgPSB7XG5cdGV6OiAwLFxuXHRoZDogMSxcblx0aW46IDIsXG5cdGF0OiAzLFxufTtcbiIsImltcG9ydCB7IGdhbWVMZXZlbHMgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHNlbGVjdFNvbmdJdGVtX21wMyBmcm9tICdhc3NldHMvYXVkaW8vc2VsZWN0U29uZ0l0ZW0ubXAzJztcblxuZnVuY3Rpb24gU29uZ0xpc3QoeyBkZWZhdWx0TGV2ZWwgPSAnZXonIH0pIHtcblx0Y29uc3QgbGlzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0bGlzdEVsZW1lbnQuaWQgPSAnc29uZ0xpc3QnO1xuXHRsaXN0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzb25nTGlzdCcpO1xuXG5cdGNvbnN0IGl0ZW1zID0gW107XG5cdGxldCBzZWxlY3RlZCxcblx0XHRsZXZlbCA9IGRlZmF1bHRMZXZlbDtcblxuXHRyZXR1cm4ge1xuXHRcdGVsZW1lbnQ6IGxpc3RFbGVtZW50LFxuXHRcdGl0ZW1zLFxuXHRcdGNyZWF0ZVNvbmcsXG5cdFx0c3dpdGNoU29uZyxcblx0XHRzd2l0Y2hMZXZlbCxcblx0XHRzZXRPcmRlcixcblx0fTtcblxuXHRmdW5jdGlvbiBjcmVhdGVTb25nKGlkLCBzb25nTWV0YSwgY29kZW5hbWUpIHtcblx0XHRjb25zdCBjb250YWluZXIgPSBuZXcgU29uZ0NvbnRhaW5lcihpdGVtcy5sZW5ndGgsIHNvbmdNZXRhLCBjb2RlbmFtZSwge1xuXHRcdFx0b25DbGljazogc3dpdGNoU29uZyxcblx0XHRcdGxldmVsLFxuXHRcdH0pO1xuXHRcdGxpc3RFbGVtZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lci5lbGVtZW50KTtcblx0XHRpdGVtc1tpZF0gPSBjb250YWluZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBzd2l0Y2hTb25nKGlkKSB7XG5cdFx0aWYgKGlkID09PSBzZWxlY3RlZCkgcmV0dXJuO1xuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2FkaW5nQmFyJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG5cdFx0ZmV0Y2goc2VsZWN0U29uZ0l0ZW1fbXAzKVxuXHRcdFx0LnRoZW4ocmVzID0+IHJlcy5hcnJheUJ1ZmZlcigpKVxuXHRcdFx0LnRoZW4oYXJyYXlCdWZmZXIgPT4ge1xuXHRcdFx0XHRjb25zdCBhY3R4ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8XG5cdFx0XHRcdFx0d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCB8fFxuXHRcdFx0XHRcdHdpbmRvdy5tb3pBdWRpb0NvbnRleHQgfHxcblx0XHRcdFx0XHR3aW5kb3cubXNBdWRpb0NvbnRleHQpKCk7XG5cdFx0XHRcdGFjdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG5cdFx0XHRcdFx0dmFyIHNvdXJjZSA9IGFjdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG5cdFx0XHRcdFx0c291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcblx0XHRcdFx0XHRzb3VyY2UubG9vcCA9IGZhbHNlO1xuXHRcdFx0XHRcdHNvdXJjZS5jb25uZWN0KGFjdHguZGVzdGluYXRpb24pO1xuXHRcdFx0XHRcdHNvdXJjZS5zdGFydCgwKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0aWYgKHNlbGVjdGVkICE9PSB1bmRlZmluZWQpIGl0ZW1zW3NlbGVjdGVkXS51blNlbGVjdCgpO1xuXG5cdFx0aWYgKCFsaXN0RWxlbWVudC5jbGFzc0xpc3RbJ3NlbGVjdGVkJ10pXG5cdFx0XHRsaXN0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuXG5cdFx0aXRlbXNbaWRdLnNlbGVjdCgpO1xuXG5cdFx0Y29uc29sZS5sb2coJ1NvbmcnLCBpZCwgJ1NlbGVjdGVkJyk7XG5cdFx0Y29uc3QgeyBzb25nTWV0YSwgY29kZW5hbWUgfSA9IGl0ZW1zW2lkXTtcblx0XHR2YXIgY3VycmVudExldmVsU2VsZWN0ZWQgPSB3aW5kb3cubGV2ZWxTZWxlY3RlZCB8fCBbJ2V6J107XG5cdFx0d2hpbGUgKFxuXHRcdFx0c29uZ01ldGFbJ2NoYXJ0JyArIGN1cnJlbnRMZXZlbFNlbGVjdGVkWzBdLnRvVXBwZXJDYXNlKCldID09IG51bGxcblx0XHQpIHtcblx0XHRcdHZhciBuZXh0TGV2ZWxDb2RlID0gZ2FtZUxldmVsc1tjdXJyZW50TGV2ZWxTZWxlY3RlZFswXV0gKyAxO1xuXHRcdFx0aWYgKG5leHRMZXZlbENvZGUgPT0gNCkgbmV4dExldmVsQ29kZSA9IDA7XG5cdFx0XHR2YXIgbmV4dExldmVsID0gT2JqZWN0LmtleXMoZ2FtZUxldmVscylbbmV4dExldmVsQ29kZV07XG5cdFx0XHRjb25zb2xlLmxvZyhcblx0XHRcdFx0J0NoYXJ0IG9mIGxldmVsJyxcblx0XHRcdFx0Y3VycmVudExldmVsU2VsZWN0ZWRbMF0sXG5cdFx0XHRcdCdpcyBOVUxMISBTd2l0Y2hpbmcgdG8gbmV4dCBsZXZlbDogJyxcblx0XHRcdFx0bmV4dExldmVsXG5cdFx0XHQpO1xuXHRcdFx0ZG9jdW1lbnRcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoYGRpdi5sZXZlbEl0ZW0uJHtjdXJyZW50TGV2ZWxTZWxlY3RlZFswXX1gKVxuXHRcdFx0XHQuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcblx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yKGBkaXYubGV2ZWxJdGVtLiR7Y3VycmVudExldmVsU2VsZWN0ZWRbMF19YClcblx0XHRcdFx0LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG5cdFx0XHRzd2l0Y2hMZXZlbChuZXh0TGV2ZWwubWF0Y2gobmV4dExldmVsKSk7XG5cdFx0XHRkb2N1bWVudFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcihgZGl2LmxldmVsSXRlbS4ke25leHRMZXZlbH1gKVxuXHRcdFx0XHQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0XHRcdCcjc29uZ0xpc3QgPiBkaXYuc29uZ0l0ZW1Db250YWluZXIuc2VsZWN0ZWQgPiBkaXYubGV2ZWwnXG5cdFx0XHRcdClcblx0XHRcdFx0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcblx0XHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY3VycmVudExldmVsU2VsZWN0ZWRbMF0pO1xuXHRcdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZChuZXh0TGV2ZWwpO1xuXHRcdFx0XHR9KTtcblx0XHRcdGN1cnJlbnRMZXZlbFNlbGVjdGVkID0gW25leHRMZXZlbF07XG5cdFx0fVxuXHRcdGZldGNoKFxuXHRcdFx0YGh0dHBzOi8vY2hhcnRzLnBoaWNvbW11bml0eS5jb20uY24vJHtjb2RlbmFtZX0vJHtzb25nTWV0YVsnaWxsdXN0cmF0aW9uJ119YFxuXHRcdClcblx0XHRcdC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYmxvYigpKVxuXHRcdFx0LnRoZW4oKGJsb2IpID0+IHtcblx0XHRcdFx0Y29uc3QgaW1nVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblx0XHRcdFx0ZG9jdW1lbnQuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKFxuXHRcdFx0XHRcdCdzdHlsZScsXG5cdFx0XHRcdFx0YC0tYmFja2dyb3VuZDogdXJsKCR7aW1nVXJsfSk7YFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbWcuaWxsdXN0cmF0aW9uJykuc3JjID0gaW1nVXJsO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaCgoZXJyKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyKFxuXHRcdFx0XHRcdCfojrflj5bmm7Lnu5jlpLHotKUhJyxcblx0XHRcdFx0XHRgdXJsOiBodHRwczovL2NoYXJ0cy5waGljb21tdW5pdHkuY29tLmNuLyR7Y29kZW5hbWV9LyR7c29uZ01ldGFbJ2lsbHVzdHJhdGlvbiddfWAsXG5cdFx0XHRcdFx0ZXJyXG5cdFx0XHRcdCk7XG5cdFx0XHR9KTtcblx0XHRmZXRjaChcblx0XHRcdGBodHRwczovL2NoYXJ0cy5waGljb21tdW5pdHkuY29tLmNuLyR7Y29kZW5hbWV9LyR7c29uZ01ldGFbJ211c2ljRmlsZSddfWBcblx0XHQpXG5cdFx0XHQudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJsb2IoKSlcblx0XHRcdC50aGVuKChibG9iKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNvbmdVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHdpbmRvdy5wbGF5U29uZ1hIUk9iai5hYm9ydCgpO1xuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0bnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRmZXRjaChzb25nVXJsKVxuXHRcdFx0XHRcdC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKSlcblx0XHRcdFx0XHQudGhlbigoYXJyYXlCdWZmZXIpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGdhaW5Ob2RlID0gd2luZG93LnNsaWNlc0F1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XG5cdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VzQXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YShcblx0XHRcdFx0XHRcdFx0YXJyYXlCdWZmZXIsXG5cdFx0XHRcdFx0XHRcdGZ1bmN0aW9uIChidWZmZXIpIHtcblx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlLnN0b3AoKTtcblx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRudWxsO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VBdWRpb0NvbnRleHRTb3VyY2UgPVxuXHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlc0F1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VBdWRpb0NvbnRleHRTb3VyY2UuYnVmZmVyID0gYnVmZmVyO1xuXHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZUF1ZGlvQ29udGV4dFNvdXJjZS5jb25uZWN0KGdhaW5Ob2RlKTtcblx0XHRcdFx0XHRcdFx0XHRnYWluTm9kZS5jb25uZWN0KFxuXHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlc0F1ZGlvQ29udGV4dC5kZXN0aW5hdGlvblxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlLnN0YXJ0KFxuXHRcdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRcdHNvbmdNZXRhWydzbGljZUF1ZGlvU3RhcnQnXVxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0Z2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShcblx0XHRcdFx0XHRcdFx0XHRcdDAuMDEsXG5cdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VzQXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRnYWluTm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKFxuXHRcdFx0XHRcdFx0XHRcdFx0MSxcblx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZXNBdWRpb0NvbnRleHQuY3VycmVudFRpbWUgKyAxXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRjbGVhckludGVydmFsKHdpbmRvdy5zbGljZUF1ZGlvSW50ZXJ2YWwpO1xuXHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZUF1ZGlvSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRnYWluTm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQwLjAxLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VzQXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lICsgMVxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VBdWRpb0NvbnRleHRTb3VyY2Uuc3RvcCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VBdWRpb0NvbnRleHRTb3VyY2UgPVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZXNBdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zbGljZUF1ZGlvQ29udGV4dFNvdXJjZS5idWZmZXIgPVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJ1ZmZlcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlLmNvbm5lY3QoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2Fpbk5vZGVcblx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlLnN0YXJ0KFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c29uZ01ldGFbJ3NsaWNlQXVkaW9TdGFydCddXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGdhaW5Ob2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0MSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2xpY2VzQXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lICtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDFcblx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcdFx0XHRcdFx0fSwgMTUwMDApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvYWRpbmdCYXInKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmVycihcblx0XHRcdFx0XHQn6I635Y+W5q2M5puy5aSx6LSlIScsXG5cdFx0XHRcdFx0YHVybDogaHR0cHM6Ly9jaGFydHMucGhpY29tbXVuaXR5LmNvbS5jbi8ke2NvZGVuYW1lfS8ke3NvbmdNZXRhWydtdXNpY0ZpbGUnXX1gLFxuXHRcdFx0XHRcdGVyclxuXHRcdFx0XHQpO1xuXHRcdFx0fSk7XG5cblx0XHRzZWxlY3RlZCA9IGlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc3dpdGNoTGV2ZWwobmV3TGV2ZWwpIHtcblx0XHRpZiAobGV2ZWwgPT09IG5ld0xldmVsKSByZXR1cm47XG5cdFx0d2luZG93LmxldmVsU2VsZWN0ZWQgPSBuZXdMZXZlbDtcblx0XHRpdGVtcy5mb3JFYWNoKCh7IHN3aXRjaExldmVsIH0pID0+IHN3aXRjaExldmVsKG5ld0xldmVsKSk7XG5cdFx0bGV2ZWwgPSBuZXdMZXZlbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNvcnQoZm4pIHtcblx0XHRbLi4uaXRlbXNdXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gZm4oYSwgYikpXG5cdFx0XHQuZm9yRWFjaCgoeyBlbGVtZW50IH0sIGlkeCkgPT4ge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhpdGVtcywgZWxlbWVudC5zdHlsZS5vcmRlciwgaWR4KTtcblx0XHRcdFx0ZWxlbWVudC5zdHlsZS5vcmRlciA9IGlkeDtcblx0XHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqIEBwYXJhbSB7J2RlZmF1bHQnfCdsZXZlbCd8J25hbWUnfSBvcmRlclxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0T3JkZXIob3JkZXIpIHtcblx0XHRzd2l0Y2ggKG9yZGVyKSB7XG5cdFx0Y2FzZSAnbGV2ZWwnOlxuXHRcdFx0c29ydCgoYSwgYikgPT5cblx0XHRcdFx0YS5zb25nTWV0YVtgJHtsZXZlbH1SYW5raW5nYF0gPFxuXHRcdFx0XHRcdGIuc29uZ01ldGFbYCR7bGV2ZWx9UmFua2luZ2BdXG5cdFx0XHRcdFx0PyAxXG5cdFx0XHRcdFx0OiAtMVxuXHRcdFx0KTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ25hbWUnOlxuXHRcdFx0c29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYS5zb25nTWV0YS5uYW1lID4gYi5zb25nTWV0YS5uYW1lID8gMSA6IC0xO1xuXHRcdFx0fSk7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0aXRlbXMuZm9yRWFjaCgoeyBlbGVtZW50IH0pID0+IChlbGVtZW50LnN0eWxlLm9yZGVyID0gJycpKTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBTb25nQ29udGFpbmVyKGluZGV4LCBzb25nTWV0YSwgY29kZW5hbWUsIHsgbGV2ZWwsIG9uQ2xpY2sgfSkge1xuXHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0Y29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3NvbmdJdGVtQ29udGFpbmVyJyk7XG5cblx0Y29uc3Qgc29uZ0l0ZW0gPSBTb25nSXRlbShzb25nTWV0YSwgY29kZW5hbWUpLFxuXHRcdHNvbmdMZXZlbCA9IFNvbmdMZXZlbChzb25nTWV0YSwgbGV2ZWwpO1xuXHRjb250YWluZXIuYXBwZW5kQ2hpbGQoc29uZ0l0ZW0pO1xuXHRjb250YWluZXIuYXBwZW5kQ2hpbGQoc29uZ0xldmVsLmVsZW1lbnQpO1xuXG5cdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG9uQ2xpY2soaW5kZXgpKTtcblxuXHRjb25zdCBzZWxlY3QgPSAoKSA9PiB7XG5cdFx0c29uZ0l0ZW0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblx0XHRjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblx0XHRmb3IgKGNvbnN0IGxldmVsIGluIGdhbWVMZXZlbHMpIHtcblx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yKGBkaXYubGV2ZWxJdGVtLiR7bGV2ZWx9YClcblx0XHRcdFx0LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG5cdFx0XHRpZiAoc29uZ01ldGFbJ2NoYXJ0JyArIGxldmVsLnRvVXBwZXJDYXNlKCldID09IG51bGwpIHtcblx0XHRcdFx0ZG9jdW1lbnRcblx0XHRcdFx0XHQucXVlcnlTZWxlY3RvcihgZGl2LmxldmVsSXRlbS4ke2xldmVsfWApXG5cdFx0XHRcdFx0LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoYGRpdi5sZXZlbEl0ZW0uJHtsZXZlbH1gKVxuXHRcdFx0XHRcdC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXHRcdFx0XHQvLyBjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdi5sZXZlbEl0ZW0uJHtsZXZlbH1gKS5zZXRBdHRyaWJ1dGUoXG5cdFx0XHRcdCdkYXRhLWxldmVsJyxcblx0XHRcdFx0Ly8gTWF0aC5mbG9vcihzb25nTWV0YVtgJHtsZXZlbH1SYW5raW5nYF0gfHwgMClcblx0XHRcdFx0TWF0aC5mbG9vcihcblx0XHRcdFx0XHRzb25nTWV0YVtsZXZlbCArICdSYW5raW5nJ10gfHxcblx0XHRcdFx0XHRcdHNvbmdNZXRhWydlelJhbmtpbmcnXSB8fFxuXHRcdFx0XHRcdFx0c29uZ01ldGFbJ2hkUmFua2luZyddIHx8XG5cdFx0XHRcdFx0XHRzb25nTWV0YVsnaW5SYW5raW5nJ10gfHxcblx0XHRcdFx0XHRcdHNvbmdNZXRhWydhdFJhbmtpbmcnXSB8fFxuXHRcdFx0XHRcdFx0MFxuXHRcdFx0XHQpXG5cdFx0XHQpO1xuXHRcdH1cblx0fTtcblxuXHRjb25zdCB1blNlbGVjdCA9ICgpID0+IHtcblx0XHRzb25nSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXHRcdGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0ZWxlbWVudDogY29udGFpbmVyLFxuXHRcdHNvbmdNZXRhLFxuXHRcdGNvZGVuYW1lLFxuXHRcdHNlbGVjdCxcblx0XHR1blNlbGVjdCxcblx0XHRzd2l0Y2hMZXZlbDogc29uZ0xldmVsLnN3aXRjaExldmVsLFxuXHR9O1xufVxuXG5mdW5jdGlvbiBTb25nSXRlbShzb25nTWV0YSwgY29kZW5hbWUpIHtcblx0Ly9cdOWIm+W7uuatjOabsuS/oeaBr+WFg+e0oFxuXHRjb25zdCBzb25nSXRlbUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0c29uZ0l0ZW1FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NvbmdJdGVtJyk7XG5cdHNvbmdJdGVtRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYXJ0aXN0Jywgc29uZ01ldGEuYXJ0aXN0KTtcblx0c29uZ0l0ZW1FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jb2RlbmFtZScsIGNvZGVuYW1lKTtcblx0c29uZ0l0ZW1FbGVtZW50LmlubmVyVGV4dCA9IHNvbmdNZXRhLm5hbWU7XG5cblx0cmV0dXJuIHNvbmdJdGVtRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gU29uZ0xldmVsKHNvbmdNZXRhLCBkZWZhdWx0TGV2ZWwgPSAnZXonKSB7XG5cdC8vXHTliJvlu7rpmr7luqblhYPntKBcblx0Y29uc3Qgc29uZ0l0ZW1MZXZlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0c29uZ0l0ZW1MZXZlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbGV2ZWwnKTtcblx0c3dpdGNoTGV2ZWwoZGVmYXVsdExldmVsKTtcblxuXHRyZXR1cm4geyBlbGVtZW50OiBzb25nSXRlbUxldmVsRWxlbWVudCwgc3dpdGNoTGV2ZWwgfTtcblxuXHRmdW5jdGlvbiBzd2l0Y2hMZXZlbChsZXZlbCkge1xuXHRcdHNvbmdJdGVtTGV2ZWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2V6JywgJ2hkJywgJ2luJywgJ2F0Jyk7XG5cdFx0c29uZ0l0ZW1MZXZlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChsZXZlbCk7XG5cdFx0c29uZ0l0ZW1MZXZlbEVsZW1lbnQuc2V0QXR0cmlidXRlKFxuXHRcdFx0J2RhdGEtbGV2ZWwnLFxuXHRcdFx0TWF0aC5mbG9vcihcblx0XHRcdFx0c29uZ01ldGFbbGV2ZWwgKyAnUmFua2luZyddIHx8XG5cdFx0XHRcdFx0c29uZ01ldGFbJ2V6UmFua2luZyddIHx8XG5cdFx0XHRcdFx0c29uZ01ldGFbJ2hkUmFua2luZyddIHx8XG5cdFx0XHRcdFx0c29uZ01ldGFbJ2luUmFua2luZyddIHx8XG5cdFx0XHRcdFx0c29uZ01ldGFbJ2F0UmFua2luZyddIHx8XG5cdFx0XHRcdFx0MFxuXHRcdFx0KVxuXHRcdCk7XG5cdH1cbn1cbmV4cG9ydCB7IFNvbmdMaXN0IH07XG4iLCJpbXBvcnQgeyBTb25nTGlzdCB9IGZyb20gJy4vU29uZ0xpc3QuanMnO1xuLy8gaW1wb3J0IHsgZ2FtZUxldmVscyB9IGZyb20gJy4uL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgU3RhcnRfbXAzIGZyb20gJ2Fzc2V0cy9hdWRpby9TdGFydC5tcDMnO1xuaW1wb3J0ICcuL3N0eWxlLmNzcyc7XG5cbmNvbnN0IHNvbmdMaXN0ID0gU29uZ0xpc3QoeyBkZWZhdWx0TGV2ZWw6ICdleicgfSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXHRsZXQgbG9hZGluZ0VtYmVkRnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcblx0bG9hZGluZ0VtYmVkRnJhbWUuc3JjID0gJy4uL2xvYWRpbmdTY3JlZW4vaW5kZXguaHRtbCc7XG5cdGxvYWRpbmdFbWJlZEZyYW1lLmNsYXNzTGlzdC5hZGQoJ2xvYWRpbmdFbWJlZEZyYW1lJyk7XG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobG9hZGluZ0VtYmVkRnJhbWUpO1xuXHRjb25zdCBzb3J0TW9kZSA9IFtcblx0XHRcdFsnZGVmYXVsdCcsICfpu5jorqQnXSxcblx0XHRcdFsnbGV2ZWwnLCAn6Zq+5bqmJ10sXG5cdFx0XHRbJ25hbWUnLCAn5ZCN56ewJ10sXG5cdFx0XSxcblx0XHRkZWZhdWx0T3JkZXIgPSAwO1xuXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5zZXR0aW5nQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0bG9jYXRpb24uaHJlZiA9ICcuLi9zZXR0aW5ncy9pbmRleC5odG1sJztcblx0fSk7XG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdiNhdmF0YXJCYXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0dmFyIF9lbGVtZW50ID0gZS50YXJnZXQ7XG5cdFx0aWYgKF9lbGVtZW50LmNsYXNzTGlzdC50b1N0cmluZygpLm1hdGNoKCdhdmF0YXJCYXInKSA9PSBudWxsKSB7XG5cdFx0XHRfZWxlbWVudCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG5cdFx0fVxuXHRcdGlmIChfZWxlbWVudC5jbGFzc0xpc3QudG9TdHJpbmcoKS5tYXRjaCgnZXhwYW5kJykpIHtcblx0XHRcdF9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRfZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdleHBhbmQnKTtcblx0XHR9XG5cdH0pO1xuXHRpZiAod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwbGF5ZXJOYW1lJykgIT0gbnVsbCkge1xuXHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0J1NldHRpbmcgcGxheWVyIG5hbWU6ICcsXG5cdFx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BsYXllck5hbWUnKVxuXHRcdCk7XG5cdFx0ZG9jdW1lbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yKCdkaXYjYXZhdGFyQmFyJylcblx0XHRcdC5zZXRBdHRyaWJ1dGUoXG5cdFx0XHRcdCdkYXRhLW5hbWUnLFxuXHRcdFx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BsYXllck5hbWUnKVxuXHRcdFx0KTtcblx0fVxuXHQvL1x06I635Y+W5q2M5puy5YiX6KGo5bm255Sf5oiQ5YWD57SgXG5cdHdpbmRvdy5jaGFwdGVyTmFtZSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobmV3IFVSTChsb2NhdGlvbi5ocmVmKS5zZWFyY2gpLmdldChcblx0XHQnYydcblx0KTtcblx0ZmV0Y2goJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvSGFuSGFuMjMzL1BoaUNvbW11bml0eS1DaGFydHMtUmVwby9jb250ZW50cycpXG5cdFx0LnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcblx0XHQudGhlbigocmVzcG9uc2UpID0+IHtcblx0XHRcdHdpbmRvdy5zb25nQ29kZU5hbWVMaXN0ID0gbmV3IEFycmF5KCk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRyZXNwb25zZVtpXS5uYW1lLm1hdGNoKC8uZ2l0aHVifFJFQURNRS5tZHxDTkFNRXxfaGVhZGVycy8pICE9XG5cdFx0XHRcdFx0bnVsbFxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHR3aW5kb3cuc29uZ0NvZGVOYW1lTGlzdC5wdXNoKHJlc3BvbnNlW2ldLm5hbWUpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gd2luZG93LnNvbmdDb2RlTmFtZUxpc3QgPSBKU09OLnBhcnNlKHNvbmdMaXN0WEhSLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHR3aW5kb3cuc29uZ01ldGFMaXN0ID0gbmV3IEFycmF5KCk7XG5cdFxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB3aW5kb3cuc29uZ0NvZGVOYW1lTGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRmZXRjaChlbmNvZGVVUkkoJ2h0dHBzOi8vY2hhcnRzLnBoaWNvbW11bml0eS5jb20uY24vJyArIHdpbmRvdy5zb25nQ29kZU5hbWVMaXN0W2ldICsgJy9tZXRhLmpzb24nKSlcblx0XHRcdFx0XHQudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuXHRcdFx0XHRcdC50aGVuKGpzb249Pntcblx0XHRcdFx0XHRcdHdpbmRvdy5zb25nTWV0YUxpc3QucHVzaChqc29uKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGRldGVjdExvYWRDb21wbGV0ZUludGVydmFsPXNldEludGVydmFsKCgpPT57XG5cdFx0XHRcdGlmKHdpbmRvdy5zb25nTWV0YUxpc3QubGVuZ3RoPT13aW5kb3cuc29uZ0NvZGVOYW1lTGlzdC5sZW5ndGgpe1xuXHRcdFx0XHRcdGNvbnN0IHNvbmdMaXN0RWxlbWVudCA9IHNvbmdMaXN0LmVsZW1lbnQ7XG5cdFx0XHRcdFx0ZG9jdW1lbnRcblx0XHRcdFx0XHRcdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdsZWZ0QXJlYScpWzBdXG5cdFx0XHRcdFx0XHQuYXBwZW5kQ2hpbGQoc29uZ0xpc3RFbGVtZW50KTtcblx0XHRcdFxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgd2luZG93LnNvbmdNZXRhTGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0c29uZ0xpc3QuY3JlYXRlU29uZyhcblx0XHRcdFx0XHRcdFx0aSxcblx0XHRcdFx0XHRcdFx0d2luZG93LnNvbmdNZXRhTGlzdFtpXSxcblx0XHRcdFx0XHRcdFx0d2luZG93LnNvbmdNZXRhTGlzdFtpXVsnY29kZW5hbWUnXVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcblx0XHRcdFx0XHRsZXQgY3VycmVudE9yZGVyID0gZGVmYXVsdE9yZGVyO1xuXHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5zb3J0TW9kZScpLmlubmVyVGV4dCA9XG5cdFx0XHRcdFx0XHRzb3J0TW9kZVtkZWZhdWx0T3JkZXJdWzFdO1xuXHRcdFx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdFx0XHQucXVlcnlTZWxlY3RvcignZGl2LnNvcnRNb2RlJylcblx0XHRcdFx0XHRcdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRPcmRlciA9IChjdXJyZW50T3JkZXIgKyAxKSAlIHNvcnRNb2RlLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0c29uZ0xpc3Quc2V0T3JkZXIoc29ydE1vZGVbY3VycmVudE9yZGVyXVswXSk7XG5cdFx0XHRcdFx0XHRcdGUudGFyZ2V0LmlubmVyVGV4dCA9IHNvcnRNb2RlW2N1cnJlbnRPcmRlcl1bMV07XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR3aW5kb3cuc2xpY2VzQXVkaW9Db250ZXh0ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8XG5cdFx0XHRcdFx0XHR3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0IHx8XG5cdFx0XHRcdFx0XHR3aW5kb3cubW96QXVkaW9Db250ZXh0IHx8XG5cdFx0XHRcdFx0XHR3aW5kb3cubXNBdWRpb0NvbnRleHQpKCk7XG5cdFx0XHRcdFx0Ly9cdOW8uuihjOWIh+aNouaIkOesrOS4gOmmluatjFxuXHRcdFx0XHRcdHNvbmdMaXN0LnN3aXRjaFNvbmcoMCk7XG5cdFx0XHRcdFx0Ly8gc29uZ0xpc3Quc3dpdGNoTGV2ZWwoJ2luJy5tYXRjaCgnaW4nKSk7XG5cdFx0XHRcdFx0bG9hZGluZ0VtYmVkRnJhbWUucmVtb3ZlKCk7XG5cdFx0XHRcdFx0Ly8gc29uZ0xpc3Quc2V0T3JkZXIoc29ydE1vZGVbY3VycmVudE9yZGVyXVswXSk7XG5cdFx0XHRcdFx0Ly9cdOiwg+aVtOWuveW6pi/nvKnmlL5cblx0XHRcdFx0XHRkb2N1bWVudFxuXHRcdFx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJyNyaWdodEFyZWEnKVxuXHRcdFx0XHRcdFx0LnN0eWxlLnNldFByb3BlcnR5KFxuXHRcdFx0XHRcdFx0XHQnLS1zY2FsZScsXG5cdFx0XHRcdFx0XHRcdE1hdGgucm91bmQod2luZG93LmRldmljZVBpeGVsUmF0aW8pIC8gMy41XG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKFxuXHRcdFx0XHRcdC8vIFx0XCJSZXNpemU6XCIsKHdpbmRvdy5pbm5lckhlaWdodCAvIHdpbmRvdy5pbm5lcldpZHRoKSpcblx0XHRcdFx0XHQvLyBcdE1hdGgucm91bmQod2luZG93LmRldmljZVBpeGVsUmF0aW8pXG5cdFx0XHRcdFx0Ly8gKTtcblx0XHRcdFx0XHQvLyB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Ly8gXHRkb2N1bWVudFxuXHRcdFx0XHRcdC8vIFx0XHRcdC5xdWVyeVNlbGVjdG9yKFwiI3JpZ2h0QXJlYVwiKVxuXHRcdFx0XHRcdC8vIFx0XHRcdC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFx0XHQvLyBcdFx0XHRcdFwiLS1zY2FsZVwiLFxuXHRcdFx0XHRcdC8vIFx0XHRcdFx0d2luZG93LmRldmljZVBpeGVsUmF0aW9cblx0XHRcdFx0XHQvLyBcdFx0XHQpO1xuXHRcdFx0XHRcdC8vIH07XG5cdFx0XHRcdFx0Ly9cdOa3u+WKoOahjOmdouerr+m8oOagh+a7mui9rua7muWKqFxuXHRcdFx0XHRcdC8vIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZSkgPT4ge1xuXHRcdFx0XHRcdC8vIFx0LyogY29uc29sZS5sb2coXG5cdFx0XHRcdFx0Ly8gXHRcdFwiU2Nyb2xsaW5nXCIsXG5cdFx0XHRcdFx0Ly8gXHRcdGUud2hlZWxEZWx0YVksXG5cdFx0XHRcdFx0Ly8gXHRcdHBhcnNlRmxvYXQoc29uZ0xpc3QuZWxlbWVudC5zdHlsZS50b3AgfHwgMClcblx0XHRcdFx0XHQvLyBcdCk7ICovXG5cdFx0XHRcdFx0Ly8gXHRsZXQgbmV3WUNvb3JkID1cblx0XHRcdFx0XHQvLyBcdFx0cGFyc2VGbG9hdChzb25nTGlzdC5lbGVtZW50LnN0eWxlLnRvcCB8fCAwKSArIGUud2hlZWxEZWx0YVkgLyAzO1xuXHRcdFx0XHRcdC8vIFx0aWYgKG5ld1lDb29yZCA8PSAwIHx8IGUud2hlZWxEZWx0YVkgPCAwKVxuXHRcdFx0XHRcdC8vIFx0XHRzb25nTGlzdC5lbGVtZW50LnN0eWxlLnRvcCA9IG5ld1lDb29yZCArICdweCc7XG5cdFx0XHRcdFx0Ly8gfSk7XG5cdFx0XHRcblx0XHRcdFx0XHQvLyAvL1x05re75Yqg56e75Yqo56uv6Kem5bGP5ruR5YqoXG5cdFx0XHRcdFx0Ly8gbGV0IHBZLCBjWTtcblx0XHRcdFx0XHQvLyBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuXHRcdFx0XHRcdC8vIFx0cFkgPSBlLmNoYW5nZWRUb3VjaGVzWycwJ10uY2xpZW50WTtcblx0XHRcdFx0XHQvLyB9KTtcblx0XHRcdFxuXHRcdFx0XHRcdC8vIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgKGUpID0+IHtcblx0XHRcdFx0XHQvLyBcdGNZID0gZS5jaGFuZ2VkVG91Y2hlc1snMCddLmNsaWVudFk7XG5cdFx0XHRcdFx0Ly8gXHRsZXQgblkgPVxuXHRcdFx0XHRcdC8vIFx0XHRwYXJzZUZsb2F0KHNvbmdMaXN0LmVsZW1lbnQuc3R5bGUudG9wIHx8IDApIC0gMC4xICogKHBZIC0gY1kpO1xuXHRcdFx0XHRcdC8vIFx0aWYgKG5ZIDwgMCkgc29uZ0xpc3QuZWxlbWVudC5zdHlsZS50b3AgPSBuWSArICdweCc7XG5cdFx0XHRcdFx0Ly8gfSk7XG5cdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChkZXRlY3RMb2FkQ29tcGxldGVJbnRlcnZhbCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sMTAwKTtcblx0XHR9KVxuXHRcdC5jYXRjaCgoKSA9PiB7XG5cdFx0XHRhbGVydCgn5puy55uu5YiX6KGo6I635Y+W5aSx6LSl77yBJyk7XG5cdFx0fSk7XG59KTtcblxuZnVuY3Rpb24gY2hhbmdlTGV2ZWwoZXZlbnQpIHtcblx0Y29uc3QgZSA9IGV2ZW50O1xuXHQvL1x0MFPvvJrljp/pgInkuK3mt7vliqDmt6Hlh7pcblx0dHJ5IHtcblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5sZXZlbEl0ZW0uc2VsZWN0ZWQnKVxuXHRcdFx0LmNsYXNzTGlzdC5hZGQoJ2ZhZGVPdXQnKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdG51bGw7XG5cdH1cblx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0Ly9cdDMwMG1z5ZCO5Yqo55S757uT5p2f5ZCO56e76Zmk6YCJ5Lit5qC35byP77yM57uZ5ZCO5p2l6YCJ5Lit55qE5re75Yqg6YCJ5Lit5ZKM5reh5YWl6YCJ5oup5ZmoXG5cdFx0dHJ5IHtcblx0XHRcdGRvY3VtZW50XG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yKCdkaXYubGV2ZWxJdGVtLnNlbGVjdGVkJylcblx0XHRcdFx0LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bnVsbDtcblx0XHR9XG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnZmFkZUluJyk7XG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblx0fSwgMzAwKTtcblx0Y29uc3QgbGV2ZWxTdHIgPSBlLnRhcmdldC5jbGFzc0xpc3QudG9TdHJpbmcoKTtcblxuXHQvL1x05YiH5o2i5omA5pyJ6Zq+5bqmXG5cdHNvbmdMaXN0LnN3aXRjaExldmVsKGxldmVsU3RyLm1hdGNoKC9lenxoZHxpbnxhdC8pKTtcblxuXHQvL1x05pyA5ZCO5oqK5omA5pyJ55qEZmFkZemAieaLqeWZqOmDveWIoOaOiVxuXHRjb25zdCBmYWRlSW5FbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5sZXZlbEl0ZW0uZmFkZUluJyk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgZmFkZUluRWxlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRmYWRlSW5FbGVtc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlSW4nKTtcblx0fVxuXHRjb25zdCBmYWRlT3V0RWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYubGV2ZWxJdGVtLmZhZGVPdXQnKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmYWRlSW5FbGVtcy5sZW5ndGg7IGkrKykge1xuXHRcdGZhZGVPdXRFbGVtc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlT3V0Jyk7XG5cdH1cbn1cblxuZG9jdW1lbnRcblx0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5sZXZlbEl0ZW0nKVxuXHQuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoYW5nZUxldmVsKSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wbGF5QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdGNsZWFySW50ZXJ2YWwod2luZG93LnNsaWNlQXVkaW9JbnRlcnZhbCk7XG5cdHRyeSB7XG5cdFx0d2luZG93LnNsaWNlQXVkaW9Db250ZXh0U291cmNlLnN0b3AoKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRudWxsO1xuXHR9XG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZWFkeVRvTG9hZE92ZXJsYXknKS5jbGFzc0xpc3QuYWRkKCdnbycpO1xuXHRmZXRjaChTdGFydF9tcDMpXG5cdFx0LnRoZW4ocmVzID0+IHJlcy5hcnJheUJ1ZmZlcigpKVxuXHRcdC50aGVuKGFycmF5QnVmZmVyID0+IHtcblx0XHRcdGNvbnN0IGFjdHggPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHxcblx0XHRcdFx0d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCB8fFxuXHRcdFx0XHR3aW5kb3cubW96QXVkaW9Db250ZXh0IHx8XG5cdFx0XHRcdHdpbmRvdy5tc0F1ZGlvQ29udGV4dCkoKTtcblx0XHRcdGFjdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG5cdFx0XHRcdHZhciBzb3VyY2UgPSBhY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuXHRcdFx0XHRzb3VyY2UuYnVmZmVyID0gYnVmZmVyO1xuXHRcdFx0XHRzb3VyY2UubG9vcCA9IGZhbHNlO1xuXHRcdFx0XHRzb3VyY2UuY29ubmVjdChhY3R4LmRlc3RpbmF0aW9uKTtcblx0XHRcdFx0c291cmNlLnN0YXJ0KDApO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdGxvY2F0aW9uLmhyZWYgPVxuXHRcdFx0Jy4uL3doaWxlUGxheWluZy9pbmRleC5odG1sP3BsYXk9JyArXG5cdFx0XHRkb2N1bWVudFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcignZGl2LnNvbmdJdGVtLnNlbGVjdGVkJylcblx0XHRcdFx0LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2RlbmFtZScpICtcblx0XHRcdCcmbD0nICtcblx0XHRcdHdpbmRvdy5sZXZlbFNlbGVjdGVkO1xuXHR9LCAyMDAwKTtcbn0pO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsImdhbWVMZXZlbHMiLCJleiIsImhkIiwiaW4iLCJhdCIsIlNvbmdDb250YWluZXIiLCJpbmRleCIsInNvbmdNZXRhIiwiY29kZW5hbWUiLCJsZXZlbCIsIm9uQ2xpY2siLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic29uZ0l0ZW0iLCJzb25nSXRlbUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhcnRpc3QiLCJpbm5lclRleHQiLCJuYW1lIiwiU29uZ0l0ZW0iLCJzb25nTGV2ZWwiLCJkZWZhdWx0TGV2ZWwiLCJzb25nSXRlbUxldmVsRWxlbWVudCIsInN3aXRjaExldmVsIiwiZWxlbWVudCIsInJlbW92ZSIsIk1hdGgiLCJmbG9vciIsIlNvbmdMZXZlbCIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlbGVjdCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b1VwcGVyQ2FzZSIsInVuU2VsZWN0Iiwic29uZ0xpc3QiLCJsaXN0RWxlbWVudCIsImlkIiwiaXRlbXMiLCJzZWxlY3RlZCIsImNyZWF0ZVNvbmciLCJzd2l0Y2hTb25nIiwic2V0T3JkZXIiLCJvcmRlciIsInNvcnQiLCJhIiwiYiIsImZvckVhY2giLCJzdHlsZSIsImZldGNoIiwic2VsZWN0U29uZ0l0ZW0iLCJ0aGVuIiwicmVzIiwiYXJyYXlCdWZmZXIiLCJhY3R4IiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwibW96QXVkaW9Db250ZXh0IiwibXNBdWRpb0NvbnRleHQiLCJkZWNvZGVBdWRpb0RhdGEiLCJidWZmZXIiLCJzb3VyY2UiLCJjcmVhdGVCdWZmZXJTb3VyY2UiLCJsb29wIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwic3RhcnQiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudExldmVsU2VsZWN0ZWQiLCJsZXZlbFNlbGVjdGVkIiwibmV4dExldmVsQ29kZSIsIm5leHRMZXZlbCIsIk9iamVjdCIsImtleXMiLCJtYXRjaCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZXNwb25zZSIsImJsb2IiLCJpbWdVcmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJjaGlsZHJlbiIsImNhdGNoIiwiZXJyIiwic29uZ1VybCIsInBsYXlTb25nWEhST2JqIiwiYWJvcnQiLCJnYWluTm9kZSIsInNsaWNlc0F1ZGlvQ29udGV4dCIsImNyZWF0ZUdhaW4iLCJzbGljZUF1ZGlvQ29udGV4dFNvdXJjZSIsInN0b3AiLCJnYWluIiwic2V0VmFsdWVBdFRpbWUiLCJjdXJyZW50VGltZSIsImxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lIiwiY2xlYXJJbnRlcnZhbCIsInNsaWNlQXVkaW9JbnRlcnZhbCIsInNldEludGVydmFsIiwic2V0VGltZW91dCIsIm5ld0xldmVsIiwiZm4iLCJpZHgiLCJTb25nTGlzdCIsImNoYW5nZUxldmVsIiwiZXZlbnQiLCJ0YXJnZXQiLCJsZXZlbFN0ciIsInRvU3RyaW5nIiwiZmFkZUluRWxlbXMiLCJpIiwiZmFkZU91dEVsZW1zIiwibG9hZGluZ0VtYmVkRnJhbWUiLCJib2R5Iiwic29ydE1vZGUiLCJocmVmIiwiX2VsZW1lbnQiLCJwYXJlbnRFbGVtZW50IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNoYXB0ZXJOYW1lIiwiVVJMU2VhcmNoUGFyYW1zIiwic2VhcmNoIiwiZ2V0IiwianNvbiIsInNvbmdDb2RlTmFtZUxpc3QiLCJBcnJheSIsInB1c2giLCJzb25nTWV0YUxpc3QiLCJlbmNvZGVVUkkiLCJkZXRlY3RMb2FkQ29tcGxldGVJbnRlcnZhbCIsInNvbmdMaXN0RWxlbWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjdXJyZW50T3JkZXIiLCJzZXRQcm9wZXJ0eSIsInJvdW5kIiwiZGV2aWNlUGl4ZWxSYXRpbyIsImFsZXJ0IiwiZXJyb3IiLCJTdGFydCIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=