(()=>{"use strict";const e=[{type:"slide",title:"谱面延时(MS)",codename:"input-offset",range:[-500,500],defaultValue:0,offset:5},{type:"button",title:"根据声音调整偏移率",onClick(){location.href="./calibrate"}},{type:"slide",title:"按键缩放",codename:"select-scale-ratio",range:[1,5],defaultValue:3},{type:"slide",title:"背景亮度",codename:"select-global-alpha",range:[1,5],defaultValue:3},{type:"toggle",title:"开启多押辅助",codename:"highLight",defaultValue:!0},{type:"toggle",title:"开启打击音效",codename:"hitSong",defaultValue:!0},{type:"toggle",title:"游玩时自动全屏",codename:"autoFullscreen",defaultValue:!0},{type:"toggle",title:"开启FC/AP指示器",codename:"lineColor"},{type:"toggle",title:"使用游玩友好型Note",codename:"usePlayerFriendlyUI"},{type:"slide",title:"界面宽高比",codename:"select-aspect-ratio",range:[1,8],defaultValue:8},{type:"button",title:"界面宽高比数值说明",onClick(){alert("1=>5:4     (1.25)\n2=>4:3     (1.333333)\n3=>10:7   (1.428571)\n4=>19:13 (1.461538)\n5=>8:5     (1.6)\n6=>5:3     (1.666667)\n7=>22:13 (1.692308)\n8=>16:9   (1.777778)")}},{type:"toggle",title:"开启HyperMode",codename:"hyperMode"},{type:"toggle",title:"启用旧版本打歌界面UI",codename:"useOldUI"},{type:"toggle",title:"背景模糊显示",codename:"imageBlur",defaultValue:!0},{type:"toggle",title:"启用AutoPlay",codename:"autoplay"},{type:"toggle",title:"开启触摸反馈",codename:"feedback"},{type:"toggle",title:"显示定位点",codename:"showPoint"},{type:"button",title:"修改玩家昵称",onClick(){const e=prompt("输入昵称","GUEST");localStorage.setItem("playerName",e)}},{type:"button",title:"关于我们",onClick(){location.href="../aboutUs/index.html"}},{type:"button",title:"清除全部数据",onClick(){window.localStorage.clear(),location.href="../index.html"}},{type:"button",title:"导出本地数据到剪贴板",onClick(){navigator.clipboard.writeText(JSON.stringify(localStorage)),this.innerHTML='<img src="../assets/images/Tick.svg"> 成功';const e=setTimeout((()=>{this.innerHTML="导出本地数据到剪贴板",clearTimeout(e)}),2e3)}},{type:"button",title:"从剪贴板导入数据",onClick(){navigator.clipboard.readText().then((e=>{try{const t=JSON.parse(e),n=Object.keys(t);for(const e in n)console.log(e,t[e]),localStorage.setItem(n[e],t[n[e]]);this.innerHTML='<img src="../assets/images/Tick.svg"> 成功';const a=setTimeout((()=>{this.innerHTML="导出本地数据到剪贴板",clearTimeout(a)}),2e3);location.reload()}catch(e){alert("导入失败，请检查剪贴板内容是否正确\n"+e)}}))}}];window.addEventListener("DOMContentLoaded",(()=>{window.localStorage.length,document.querySelector("#backBtn").addEventListener("click",(()=>{location.href="../chapterSelect/index.html"})),fetch("https://api.github.com/repos/HanHan233/PhiCommunity/commits?per_page=1").then((e=>e.json())).then((e=>{document.querySelector("#ver").innerText=e[0].sha.slice(0,7)}));try{document.querySelector("#device").innerText="Platform: "+navigator.userAgentData.platform+" ; isMobile:"+navigator.userAgentData.mobile}catch(e){document.querySelector("#device").innerText="User-Agent : "+navigator.userAgent.slice(navigator.userAgent.lastIndexOf(" "))}document.querySelector("#device").title=navigator.userAgent,e.forEach((e=>{let t;switch(e.type){case"slide":e.defaultValue=parseFloat(window.localStorage.getItem(e.codename))||e.defaultValue,t=function({title:e,codename:t,range:n,defaultValue:a=n[0],offset:o=1}){let l=a;const i=document.createElement("div");i.className="item";const c=document.createElement("div");c.className="title",c.dataset.name=e,c.dataset.value=l;const d=function({range:e,defaultValue:t=e[0],offset:n=1,onValueChange:a}){let o;const l=e[1]-e[0],i=document.createElement("div");i.className="slider";const c=document.createElement("div");c.className="slideBlock",i.appendChild(c),i.addEventListener("click",(e=>{e.offsetX>i.offsetWidth-35&&m(n),e.offsetX<35&&m(0-n)}));let d=!1;const s=t=>{u(Math.round(e[0]+(t.pageX-i.clientLeft-70)/(i.clientWidth-100)*l))};c.addEventListener("mousedown",(()=>{d=!0,window.addEventListener("mousemove",s)})),window.addEventListener("mouseup",(()=>{d&&(d=!1,window.removeEventListener("mousemove",s))}));const r=t=>{u(Math.round(e[0]+(t.targetTouches[0].pageX-i.clientLeft-70)/(i.clientWidth-100)*l))};return c.addEventListener("touchstart",(()=>{d=!0,window.addEventListener("touchmove",r)})),window.addEventListener("touchend",(()=>{d&&(d=!1,window.removeEventListener("touchmove",r))})),u(t),{element:i,set:u,add:m};function u(t){return t<e[0]&&(t=e[0]),t>e[1]&&(t=e[1]),c.style.marginLeft=(t-(e[0]+e[1])/2)/l*2*80+"%",a(t),o=t,o}function m(e){return console.log(e),u(o+e)}}({range:n,defaultValue:a,offset:o,onValueChange:function(e){c.dataset.value=e,window.localStorage.setItem(t,e),l=e}});return i.appendChild(c),i.appendChild(d.element),{element:i,getValue:()=>l}}(e);break;case"toggle":e.defaultValue="true"==window.localStorage.getItem(e.codename)||e.defaultValue,t=function({title:e,codename:t,defaultValue:n=!1}){let a=n;const o=document.createElement("div");o.className="item";const l=document.createElement("div");l.className="title",l.dataset.name=e;const i=document.createElement("div");return i.classList.add("toggle"),a&&i.classList.add("checked"),o.appendChild(l),o.appendChild(i),o.addEventListener("click",(()=>{a?(i.classList.remove("checked"),window.localStorage.setItem(t,!1)):(i.classList.add("checked"),window.localStorage.setItem(t,!0)),a=!a})),{element:o}}(e);break;case"button":t=function({title:e,onClick:t}){const n=document.createElement("div");n.className="item";const a=document.createElement("button");return a.innerText=e,a.className="button",n.appendChild(a),a.onclick=t,{element:n}}(e);break;default:throw new Error("Unknown setting: "+e)}document.getElementById("settingItems").appendChild(t.element)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUdQLENBQUVSLFFBQVN6QixHRndCVHFDLENBQVcxQyxHQUNsQixNQUNELElBQUssU0FDSkMsRUd2REksVUFBb0IsTUFBRXZELEVBQUssUUFBRUssSUFDbkMsTUFBTXNELEVBQVlwQixTQUFTcUIsY0FBYyxPQUN6Q0QsRUFBVUUsVUFBWSxPQUV0QixNQUFNb0MsRUFBUzFELFNBQVNxQixjQUFjLFVBUXRDLE9BUEFxQyxFQUFPcEQsVUFBWTdDLEVBQ25CaUcsRUFBT3BDLFVBQVksU0FFbkJGLEVBQVVTLFlBQVk2QixHQUV0QkEsRUFBT0MsUUFBVTdGLEVBRVYsQ0FBRStFLFFBQVN6QixHSDJDVHdDLENBQVc3QyxHQUNsQixNQUNELFFBQ0MsTUFBTSxJQUFJOEMsTUFBTSxvQkFBc0I5QyxHQUV2Q2YsU0FBUzhELGVBQWUsZ0JBQWdCakMsWUFBWWIsRUFBSzZCLGdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhpLWNvbW11bml0eS8uL3NyYy9zZXR0aW5ncy9zZXR0aW5nLmpzIiwid2VicGFjazovL3BoaS1jb21tdW5pdHkvLi9zcmMvc2V0dGluZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGhpLWNvbW11bml0eS8uL3NyYy9zZXR0aW5ncy9jb21wb25lbnRzL3NsaWRlLmpzIiwid2VicGFjazovL3BoaS1jb21tdW5pdHkvLi9zcmMvc2V0dGluZ3MvY29tcG9uZW50cy90b2dnbGUuanMiLCJ3ZWJwYWNrOi8vcGhpLWNvbW11bml0eS8uL3NyYy9zZXR0aW5ncy9jb21wb25lbnRzL2J1dHRvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEB0eXBlZGVmIHt7XG4gKiBcdHRpdGxlOiBzdHJpbmcsXG4gKiBcdGNvZGVuYW1lOiBzdHJpbmdcbiAqIH19IEJhc2VTZXR0aW5nXG4gKlxuICogQHR5cGVkZWYgeyBCYXNlU2V0dGluZyAmIHtcbiAqICByYW5nZTogW251bWJlcixudW1iZXJdLFxuICogXHRkZWZhdWx0VmFsdWU/OiBudW1iZXIgPSByYW5nZVswXSxcbiAqIFx0b2Zmc2V0OiBudW1iZXIgPSAxLFxuICogfX0gU2xpZGVTZXR0aW5nXG4gKlxuICogIEB0eXBlZGVmIHsgQmFzZVNldHRpbmcgJiB7XG4gKiBcdGRlZmF1bHRWYWx1ZTpib29sZWFuID0gZmFsc2UsXG4gKiB9fSBUb2dnbGVTZXR0aW5nXG4gKlxuICogIEB0eXBlZGVmIHt7XG4gKiBcdHRpdGxlOiBzdHJpbmcsXG4gKiBcdG9uQ2xpY2s6ICh0aGlzOiBHbG9iYWxFdmVudEhhbmRsZXJzLCBldjogTW91c2VFdmVudCkgPT4gYW55XG4gKiB9fSBCdXR0b25TZXR0aW5nXG4gKlxuICovXG5cbi8qKlxuICogQHR5cGUge0FycmF5IDxcbiAqIChTbGlkZVNldHRpbmcgJiB7dHlwZTogJ3NsaWRlJ30pfFxuICogKFRvZ2dsZVNldHRpbmcgJiB7dHlwZTogJ3RvZ2dsZSd9fFxuICogKEJ1dHRvblNldHRpbmcgJiB7dHlwZTogJ2J1dHRvbid9KT5cbiAqIH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0gW1xuXHR7XG5cdFx0dHlwZTogJ3NsaWRlJyxcblx0XHR0aXRsZTogJ+iwsemdouW7tuaXtihNUyknLFxuXHRcdGNvZGVuYW1lOiAnaW5wdXQtb2Zmc2V0Jyxcblx0XHRyYW5nZTogWy01MDAsIDUwMF0sXG5cdFx0ZGVmYXVsdFZhbHVlOiAwLFxuXHRcdG9mZnNldDogNSxcblx0fSxcblx0e1xuXHRcdHR5cGU6ICdidXR0b24nLFxuXHRcdHRpdGxlOiAn5qC55o2u5aOw6Z+z6LCD5pW05YGP56e7546HJyxcblx0XHRvbkNsaWNrKCkge1xuXHRcdFx0bG9jYXRpb24uaHJlZiA9ICcuL2NhbGlicmF0ZSc7XG5cdFx0fSxcblx0fSxcblx0e1xuXHRcdHR5cGU6ICdzbGlkZScsXG5cdFx0dGl0bGU6ICfmjInplK7nvKnmlL4nLFxuXHRcdGNvZGVuYW1lOiAnc2VsZWN0LXNjYWxlLXJhdGlvJyxcblx0XHRyYW5nZTogWzEsIDVdLFxuXHRcdGRlZmF1bHRWYWx1ZTogMyxcblx0fSxcblx0e1xuXHRcdHR5cGU6ICdzbGlkZScsXG5cdFx0dGl0bGU6ICfog4zmma/kuq7luqYnLFxuXHRcdGNvZGVuYW1lOiAnc2VsZWN0LWdsb2JhbC1hbHBoYScsXG5cdFx0cmFuZ2U6IFsxLCA1XSxcblx0XHRkZWZhdWx0VmFsdWU6IDMsXG5cdH0sXG5cdHtcblx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHR0aXRsZTogJ+W8gOWQr+WkmuaKvOi+heWKqScsXG5cdFx0Y29kZW5hbWU6ICdoaWdoTGlnaHQnLFxuXHRcdGRlZmF1bHRWYWx1ZTogdHJ1ZSxcblx0fSxcblx0e1xuXHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdHRpdGxlOiAn5byA5ZCv5omT5Ye76Z+z5pWIJyxcblx0XHRjb2RlbmFtZTogJ2hpdFNvbmcnLFxuXHRcdGRlZmF1bHRWYWx1ZTogdHJ1ZSxcblx0fSxcblx0e1xuXHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdHRpdGxlOiAn5ri4546p5pe26Ieq5Yqo5YWo5bGPJyxcblx0XHRjb2RlbmFtZTogJ2F1dG9GdWxsc2NyZWVuJyxcblx0XHRkZWZhdWx0VmFsdWU6IHRydWUsXG5cdH0sXG5cdHtcblx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHR0aXRsZTogJ+W8gOWQr0ZDL0FQ5oyH56S65ZmoJyxcblx0XHRjb2RlbmFtZTogJ2xpbmVDb2xvcicsXG5cdH0sXG5cdC8v5LiL6Z2i5bCx5piv5qih5ouf5Zmo5YW25LuW55qE5Yqf6IO95LqGXG5cdHtcblx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHR0aXRsZTogJ+S9v+eUqOa4uOeOqeWPi+WlveWei05vdGUnLFxuXHRcdGNvZGVuYW1lOiAndXNlUGxheWVyRnJpZW5kbHlVSScsXG5cdH0sXG5cdHtcblx0XHR0eXBlOiAnc2xpZGUnLFxuXHRcdHRpdGxlOiAn55WM6Z2i5a696auY5q+UJyxcblx0XHRjb2RlbmFtZTogJ3NlbGVjdC1hc3BlY3QtcmF0aW8nLFxuXHRcdHJhbmdlOiBbMSwgOF0sXG5cdFx0ZGVmYXVsdFZhbHVlOiA4LFxuXHR9LFxuXHR7XG5cdFx0dHlwZTogJ2J1dHRvbicsXG5cdFx0dGl0bGU6ICfnlYzpnaLlrr3pq5jmr5TmlbDlgLzor7TmmI4nLFxuXHRcdG9uQ2xpY2soKSB7XG5cdFx0XHRhbGVydChcblx0XHRcdFx0JzE9PjU6NCAgICAgKDEuMjUpXFxuMj0+NDozICAgICAoMS4zMzMzMzMpXFxuMz0+MTA6NyAgICgxLjQyODU3MSlcXG40PT4xOToxMyAoMS40NjE1MzgpXFxuNT0+ODo1ICAgICAoMS42KVxcbjY9PjU6MyAgICAgKDEuNjY2NjY3KVxcbjc9PjIyOjEzICgxLjY5MjMwOClcXG44PT4xNjo5ICAgKDEuNzc3Nzc4KSdcblx0XHRcdCk7XG5cdFx0fSxcblx0fSxcblx0e1xuXHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdHRpdGxlOiAn5byA5ZCvSHlwZXJNb2RlJyxcblx0XHRjb2RlbmFtZTogJ2h5cGVyTW9kZScsXG5cdH0sXG5cdHtcblx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHR0aXRsZTogJ+WQr+eUqOaXp+eJiOacrOaJk+atjOeVjOmdolVJJyxcblx0XHRjb2RlbmFtZTogJ3VzZU9sZFVJJyxcblx0fSxcblx0e1xuXHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdHRpdGxlOiAn6IOM5pmv5qih57OK5pi+56S6Jyxcblx0XHRjb2RlbmFtZTogJ2ltYWdlQmx1cicsXG5cdFx0ZGVmYXVsdFZhbHVlOiB0cnVlLFxuXHR9LFxuXHQvLyB7XG5cdC8vIFx0dHlwZTogJ3RvZ2dsZScsXG5cdC8vIFx0dGl0bGU6ICfmmL7npLrov4fmuKHliqjnlLsnLFxuXHQvLyBcdGNvZGVuYW1lOiAnc2hvd1RyYW5zaXRpb24nLFxuXHQvLyB9LFxuXHR7XG5cdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0dGl0bGU6ICflkK/nlKhBdXRvUGxheScsXG5cdFx0Y29kZW5hbWU6ICdhdXRvcGxheScsXG5cdH0sXG5cdHtcblx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHR0aXRsZTogJ+W8gOWQr+inpuaRuOWPjemmiCcsXG5cdFx0Y29kZW5hbWU6ICdmZWVkYmFjaycsXG5cdH0sXG5cdHtcblx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHR0aXRsZTogJ+aYvuekuuWumuS9jeeCuScsXG5cdFx0Y29kZW5hbWU6ICdzaG93UG9pbnQnLFxuXHR9LFxuXHQvLyB7XG5cdC8vIFx0dHlwZTogJ2J1dHRvbicsXG5cdC8vIFx0dGl0bGU6ICfop4LnnIvmlZnlraYnLFxuXHQvLyBcdG9uQ2xpY2soKSB7XG5cdC8vIFx0XHRsb2NhdGlvbi5ocmVmID0gJy4uL3doaWxlUGxheWluZy9pbmRleC5odG1sP3BsYXk9aW50cm9kdWN0aW9uJmw9ZXonO1xuXHQvLyBcdH0sXG5cdC8vIH0sXG5cdHtcblx0XHR0eXBlOiAnYnV0dG9uJyxcblx0XHR0aXRsZTogJ+S/ruaUueeOqeWutuaYteensCcsXG5cdFx0b25DbGljaygpIHtcblx0XHRcdGNvbnN0IG5hbWUgPSBwcm9tcHQoJ+i+k+WFpeaYteensCcsICdHVUVTVCcpO1xuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BsYXllck5hbWUnLCBuYW1lKTtcblx0XHR9LFxuXHR9LFxuXHR7XG5cdFx0dHlwZTogJ2J1dHRvbicsXG5cdFx0dGl0bGU6ICflhbPkuo7miJHku6wnLFxuXHRcdG9uQ2xpY2soKSB7XG5cdFx0XHRsb2NhdGlvbi5ocmVmID0gJy4uL2Fib3V0VXMvaW5kZXguaHRtbCc7XG5cdFx0fSxcblx0fSxcblx0e1xuXHRcdHR5cGU6ICdidXR0b24nLFxuXHRcdHRpdGxlOiAn5riF6Zmk5YWo6YOo5pWw5o2uJyxcblx0XHRvbkNsaWNrKCkge1xuXHRcdFx0d2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xuXHRcdFx0bG9jYXRpb24uaHJlZiA9ICcuLi9pbmRleC5odG1sJztcblx0XHR9LFxuXHR9LFxuXHR7XG5cdFx0dHlwZTogJ2J1dHRvbicsXG5cdFx0dGl0bGU6ICflr7zlh7rmnKzlnLDmlbDmja7liLDliarotLTmnb8nLFxuXHRcdG9uQ2xpY2soKSB7XG5cdFx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChKU09OLnN0cmluZ2lmeShsb2NhbFN0b3JhZ2UpKTtcblx0XHRcdHRoaXMuaW5uZXJIVE1MID0gJzxpbWcgc3JjPVwiLi4vYXNzZXRzL2ltYWdlcy9UaWNrLnN2Z1wiPiDmiJDlip8nO1xuXHRcdFx0Y29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmlubmVySFRNTCA9ICflr7zlh7rmnKzlnLDmlbDmja7liLDliarotLTmnb8nO1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0XHR9LCAyMDAwKTtcblx0XHR9LFxuXHR9LFxuXHR7XG5cdFx0dHlwZTogJ2J1dHRvbicsXG5cdFx0dGl0bGU6ICfku47liarotLTmnb/lr7zlhaXmlbDmja4nLFxuXHRcdG9uQ2xpY2soKSB7XG5cdFx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCkudGhlbigoY2xpcFRleHQpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCBjbGlwVGV4dE9iaiA9IEpTT04ucGFyc2UoY2xpcFRleHQpO1xuXHRcdFx0XHRcdGNvbnN0IGNsaXBUZXh0T2JqS2V5cyA9IE9iamVjdC5rZXlzKGNsaXBUZXh0T2JqKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGtleXMgaW4gY2xpcFRleHRPYmpLZXlzKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhrZXlzLCBjbGlwVGV4dE9ialtrZXlzXSk7XG5cdFx0XHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcblx0XHRcdFx0XHRcdFx0Y2xpcFRleHRPYmpLZXlzW2tleXNdLFxuXHRcdFx0XHRcdFx0XHRjbGlwVGV4dE9ialtjbGlwVGV4dE9iaktleXNba2V5c11dXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLmlubmVySFRNTCA9XG5cdFx0XHRcdFx0XHQnPGltZyBzcmM9XCIuLi9hc3NldHMvaW1hZ2VzL1RpY2suc3ZnXCI+IOaIkOWKnyc7XG5cdFx0XHRcdFx0Y29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5pbm5lckhUTUwgPSAn5a+85Ye65pys5Zyw5pWw5o2u5Yiw5Ymq6LS05p2/Jztcblx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHRcdFx0XHR9LCAyMDAwKTtcblx0XHRcdFx0XHRsb2NhdGlvbi5yZWxvYWQoKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRhbGVydCgn5a+85YWl5aSx6LSl77yM6K+35qOA5p+l5Ymq6LS05p2/5YaF5a655piv5ZCm5q2j56GuXFxuJyArIGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0fSxcbl07XG4iLCJpbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZy5qcyc7XG5pbXBvcnQgeyBTbGlkZXJJdGVtLCBUb2dnbGVJdGVtLCBCdXR0b25JdGVtIH0gZnJvbSAnLi9jb21wb25lbnRzL2luZGV4LmpzJztcbmltcG9ydCAnLi9zdHlsZS5jc3MnO1xuXG4vL1x05YWo5bGA5Yid5aeL5YyW6byg5qCH5rua6L2uL+enu+WKqOerr+a7keWKqOWdkOagh1xuLy8gdmFyIHlDb29yZCA9IDAsXG4vLyBcdHByZXZpb3VzVG91Y2hZQ29vcmQgPSAwO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG5cdGlmICh3aW5kb3cubG9jYWxTdG9yYWdlLmxlbmd0aCA9PSAwKSB7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JhY2tCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdGxvY2F0aW9uLmhyZWYgPSAnLi4vY2hhcHRlclNlbGVjdC9pbmRleC5odG1sJztcblx0XHRcdC8vIGxvY2F0aW9uLmhyZWY9Jy4uL3doaWxlUGxheWluZy9pbmRleC5odG1sP3BsYXk9aW50cm9kdWN0aW9uJmw9ZXonO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiYWNrQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRsb2NhdGlvbi5ocmVmID0gJy4uL2NoYXB0ZXJTZWxlY3QvaW5kZXguaHRtbCc7XG5cdFx0fSk7XG5cdH1cblx0ZmV0Y2goJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvSGFuSGFuMjMzL1BoaUNvbW11bml0eS9jb21taXRzP3Blcl9wYWdlPTEnKVxuXHRcdC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxuXHRcdC50aGVuKChkYXRhKSA9PiB7XG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdmVyJykuaW5uZXJUZXh0ID0gZGF0YVswXS5zaGEuc2xpY2UoXG5cdFx0XHRcdDAsXG5cdFx0XHRcdDdcblx0XHRcdCk7XG5cdFx0fSk7XG5cblx0dHJ5IHtcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGV2aWNlJykuaW5uZXJUZXh0ID1cblx0XHRcdCdQbGF0Zm9ybTogJyArXG5cdFx0XHRuYXZpZ2F0b3IudXNlckFnZW50RGF0YS5wbGF0Zm9ybSArXG5cdFx0XHQnIDsgaXNNb2JpbGU6JyArXG5cdFx0XHRuYXZpZ2F0b3IudXNlckFnZW50RGF0YS5tb2JpbGU7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RldmljZScpLmlubmVyVGV4dCA9XG5cdFx0XHQnVXNlci1BZ2VudCA6ICcgK1xuXHRcdFx0bmF2aWdhdG9yLnVzZXJBZ2VudC5zbGljZShuYXZpZ2F0b3IudXNlckFnZW50Lmxhc3RJbmRleE9mKCcgJykpO1xuXHR9XG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXZpY2UnKS50aXRsZSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cdC8vIGxvYWRTZXR0aW5ncygpO1xuXHQvL+WIm+W7uuiuvue9ruadoeebrlxuXHRzZXR0aW5ncy5mb3JFYWNoKChzZXR0aW5nKSA9PiB7XG5cdFx0bGV0IGl0ZW07XG5cdFx0c3dpdGNoIChzZXR0aW5nLnR5cGUpIHtcblx0XHRjYXNlICdzbGlkZSc6XG5cdFx0XHRzZXR0aW5nLmRlZmF1bHRWYWx1ZSA9XG5cdFx0XHRcdFx0cGFyc2VGbG9hdCh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oc2V0dGluZy5jb2RlbmFtZSkpIHx8XG5cdFx0XHRcdFx0c2V0dGluZy5kZWZhdWx0VmFsdWU7XG5cdFx0XHRpdGVtID0gU2xpZGVySXRlbShzZXR0aW5nKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3RvZ2dsZSc6XG5cdFx0XHRzZXR0aW5nLmRlZmF1bHRWYWx1ZSA9XG5cdFx0XHRcdFx0d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHNldHRpbmcuY29kZW5hbWUpID09ICd0cnVlJ1xuXHRcdFx0XHRcdFx0PyB0cnVlXG5cdFx0XHRcdFx0XHQ6IGZhbHNlIHx8IHNldHRpbmcuZGVmYXVsdFZhbHVlO1xuXHRcdFx0aXRlbSA9IFRvZ2dsZUl0ZW0oc2V0dGluZyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdidXR0b24nOlxuXHRcdFx0aXRlbSA9IEJ1dHRvbkl0ZW0oc2V0dGluZyk7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHNldHRpbmc6ICcgKyBzZXR0aW5nKTtcblx0XHR9XG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHRpbmdJdGVtcycpLmFwcGVuZENoaWxkKGl0ZW0uZWxlbWVudCk7XG5cdH0pO1xufSk7XG4iLCJjb25zdCBtYXJnaW5SYW5nZSA9IDgwO1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL3NldHRpbmcnKS5TbGlkZVNldHRpbmd9IG9wdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gU2xpZGVySXRlbSh7XG5cdHRpdGxlLFxuXHRjb2RlbmFtZSxcblx0cmFuZ2UsXG5cdGRlZmF1bHRWYWx1ZSA9IHJhbmdlWzBdLFxuXHRvZmZzZXQgPSAxLFxufSkge1xuXHRsZXQgY3VycmVudFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXG5cdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRjb250YWluZXIuY2xhc3NOYW1lID0gJ2l0ZW0nO1xuXG5cdGNvbnN0IHRpdGxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHR0aXRsZUVsZW1lbnQuY2xhc3NOYW1lID0gJ3RpdGxlJztcblx0dGl0bGVFbGVtZW50LmRhdGFzZXRbJ25hbWUnXSA9IHRpdGxlO1xuXHR0aXRsZUVsZW1lbnQuZGF0YXNldFsndmFsdWUnXSA9IGN1cnJlbnRWYWx1ZTtcblxuXHRjb25zdCBzbGlkZXIgPSBTbGlkZXIoeyByYW5nZSwgZGVmYXVsdFZhbHVlLCBvZmZzZXQsIG9uVmFsdWVDaGFuZ2UgfSk7XG5cblx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlRWxlbWVudCk7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZChzbGlkZXIuZWxlbWVudCk7XG5cblx0cmV0dXJuIHsgZWxlbWVudDogY29udGFpbmVyLCBnZXRWYWx1ZTogKCkgPT4gY3VycmVudFZhbHVlIH07XG5cblx0ZnVuY3Rpb24gb25WYWx1ZUNoYW5nZSh2YWx1ZSkge1xuXHRcdHRpdGxlRWxlbWVudC5kYXRhc2V0Wyd2YWx1ZSddID0gdmFsdWU7XG5cdFx0d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvZGVuYW1lLCB2YWx1ZSk7XG5cdFx0Y3VycmVudFZhbHVlID0gdmFsdWU7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge3tcbiAqICByYW5nZTogW251bWJlcixudW1iZXJdLFxuICogXHRkZWZhdWx0VmFsdWU/OiBudW1iZXIgPSByYW5nZVswXSxcbiAqIFx0b2Zmc2V0OiBudW1iZXIgPSAxLFxuICogIG9uVmFsdWVDaGFuZ2U6KG51bWJlcikgPT4gdm9pZFxuICogfX0gb3B0aW9uXG4gKi9cbmZ1bmN0aW9uIFNsaWRlcih7IHJhbmdlLCBkZWZhdWx0VmFsdWUgPSByYW5nZVswXSwgb2Zmc2V0ID0gMSwgb25WYWx1ZUNoYW5nZSB9KSB7XG5cdGxldCBjdXJyZW50VmFsdWU7XG5cdGNvbnN0IHRvdGFsID0gcmFuZ2VbMV0gLSByYW5nZVswXTtcblxuXHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0Y29udGFpbmVyLmNsYXNzTmFtZSA9ICdzbGlkZXInO1xuXG5cdGNvbnN0IHNsaWRlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0c2xpZGVCbG9jay5jbGFzc05hbWUgPSAnc2xpZGVCbG9jayc7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZChzbGlkZUJsb2NrKTtcblxuXHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdGlmIChlLm9mZnNldFggPiBjb250YWluZXIub2Zmc2V0V2lkdGggLSAzNSkge1xuXHRcdFx0YWRkKG9mZnNldCk7XG5cdFx0fVxuXHRcdGlmIChlLm9mZnNldFggPCAzNSkge1xuXHRcdFx0YWRkKDAgLSBvZmZzZXQpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly/mi5bmm7Pmu5rliqjmnaFcblx0bGV0IGlzRHJhZ1N0YXJ0ID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIOeUteiEkeerr1xuXHQgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGVcblx0ICovXG5cdGNvbnN0IG9uTW91c2VEcmFnID0gKGUpID0+IHtcblx0XHRzZXQoXG5cdFx0XHRNYXRoLnJvdW5kKFxuXHRcdFx0XHRyYW5nZVswXSArXG5cdFx0XHRcdFx0KChlLnBhZ2VYIC0gY29udGFpbmVyLmNsaWVudExlZnQgLSA3MCkgL1xuXHRcdFx0XHRcdFx0KGNvbnRhaW5lci5jbGllbnRXaWR0aCAtIDEwMCkpICpcblx0XHRcdFx0XHRcdHRvdGFsXG5cdFx0XHQpXG5cdFx0KTtcblx0fTtcblx0c2xpZGVCbG9jay5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XG5cdFx0aXNEcmFnU3RhcnQgPSB0cnVlO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlRHJhZyk7XG5cdH0pO1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHtcblx0XHRpZiAoIWlzRHJhZ1N0YXJ0KSByZXR1cm47XG5cdFx0aXNEcmFnU3RhcnQgPSBmYWxzZTtcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZURyYWcpO1xuXHR9KTtcblxuXHQvKipcblx0ICog56e75Yqo56uvXG5cdCAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZVxuXHQgKi9cblx0Y29uc3Qgb25Ub3VjaERyYWcgPSAoZSkgPT4ge1xuXHRcdHNldChcblx0XHRcdE1hdGgucm91bmQoXG5cdFx0XHRcdHJhbmdlWzBdICtcblx0XHRcdFx0XHQoKGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIGNvbnRhaW5lci5jbGllbnRMZWZ0IC0gNzApIC9cblx0XHRcdFx0XHRcdChjb250YWluZXIuY2xpZW50V2lkdGggLSAxMDApKSAqXG5cdFx0XHRcdFx0XHR0b3RhbFxuXHRcdFx0KVxuXHRcdCk7XG5cdH07XG5cblx0c2xpZGVCbG9jay5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKCkgPT4ge1xuXHRcdGlzRHJhZ1N0YXJ0ID0gdHJ1ZTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Ub3VjaERyYWcpO1xuXHR9KTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7XG5cdFx0aWYgKCFpc0RyYWdTdGFydCkgcmV0dXJuO1xuXHRcdGlzRHJhZ1N0YXJ0ID0gZmFsc2U7XG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uVG91Y2hEcmFnKTtcblx0fSk7XG5cblx0c2V0KGRlZmF1bHRWYWx1ZSk7XG5cblx0cmV0dXJuIHsgZWxlbWVudDogY29udGFpbmVyLCBzZXQsIGFkZCB9O1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcblx0ICovXG5cdGZ1bmN0aW9uIHNldChuZXdWYWx1ZSkge1xuXHRcdGlmIChuZXdWYWx1ZSA8IHJhbmdlWzBdKSBuZXdWYWx1ZSA9IHJhbmdlWzBdO1xuXHRcdGlmIChuZXdWYWx1ZSA+IHJhbmdlWzFdKSBuZXdWYWx1ZSA9IHJhbmdlWzFdO1xuXG5cdFx0c2xpZGVCbG9jay5zdHlsZS5tYXJnaW5MZWZ0ID1cblx0XHRcdCgobmV3VmFsdWUgLSAocmFuZ2VbMF0gKyByYW5nZVsxXSkgLyAyKSAvIHRvdGFsKSAqIDIgKiBtYXJnaW5SYW5nZSArXG5cdFx0XHQnJSc7XG5cblx0XHRvblZhbHVlQ2hhbmdlKG5ld1ZhbHVlKTtcblxuXHRcdGN1cnJlbnRWYWx1ZSA9IG5ld1ZhbHVlO1xuXHRcdHJldHVybiBjdXJyZW50VmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkKG9mZnNldCkge1xuXHRcdGNvbnNvbGUubG9nKG9mZnNldCk7XG5cdFx0cmV0dXJuIHNldChjdXJyZW50VmFsdWUgKyBvZmZzZXQpO1xuXHR9XG59XG4iLCIvKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL3NldHRpbmcnKS5Ub2dnbGVTZXR0aW5nfSBvcHRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFRvZ2dsZUl0ZW0oeyB0aXRsZSwgY29kZW5hbWUsIGRlZmF1bHRWYWx1ZSA9IGZhbHNlIH0pIHtcblx0bGV0IGlzQ2hlY2tlZCA9IGRlZmF1bHRWYWx1ZTtcblxuXHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0Y29udGFpbmVyLmNsYXNzTmFtZSA9ICdpdGVtJztcblxuXHRjb25zdCB0aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0dGl0bGVFbGVtZW50LmNsYXNzTmFtZSA9ICd0aXRsZSc7XG5cdHRpdGxlRWxlbWVudC5kYXRhc2V0WyduYW1lJ10gPSB0aXRsZTtcblxuXHRjb25zdCB0b2dnbGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdHRvZ2dsZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndG9nZ2xlJyk7XG5cdGlmIChpc0NoZWNrZWQpIHRvZ2dsZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuXG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZUVsZW1lbnQpO1xuXHRjb250YWluZXIuYXBwZW5kQ2hpbGQodG9nZ2xlRWxlbWVudCk7XG5cblx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdGlmIChpc0NoZWNrZWQpIHtcblx0XHRcdHRvZ2dsZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tlZCcpO1xuXHRcdFx0d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvZGVuYW1lLCBmYWxzZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRvZ2dsZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuXHRcdFx0d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvZGVuYW1lLCB0cnVlKTtcblx0XHR9XG5cdFx0aXNDaGVja2VkID0gIWlzQ2hlY2tlZDtcblx0fSk7XG5cblx0cmV0dXJuIHsgZWxlbWVudDogY29udGFpbmVyIH07XG59XG4iLCIvKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9zZXR0aW5nJykuQnV0dG9uU2V0dGluZ30gb3B0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBCdXR0b25JdGVtKHsgdGl0bGUsIG9uQ2xpY2sgfSkge1xuXHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0Y29udGFpbmVyLmNsYXNzTmFtZSA9ICdpdGVtJztcblxuXHRjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblx0YnV0dG9uLmlubmVyVGV4dCA9IHRpdGxlO1xuXHRidXR0b24uY2xhc3NOYW1lID0gJ2J1dHRvbic7XG5cblx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cblx0YnV0dG9uLm9uY2xpY2sgPSBvbkNsaWNrO1xuXG5cdHJldHVybiB7IGVsZW1lbnQ6IGNvbnRhaW5lciB9O1xufVxuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwidHlwZSIsInRpdGxlIiwiY29kZW5hbWUiLCJyYW5nZSIsImRlZmF1bHRWYWx1ZSIsIm9mZnNldCIsIm9uQ2xpY2siLCJsb2NhdGlvbiIsImhyZWYiLCJhbGVydCIsIm5hbWUiLCJwcm9tcHQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwid2luZG93IiwiY2xlYXIiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJKU09OIiwic3RyaW5naWZ5IiwidGhpcyIsImlubmVySFRNTCIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwicmVhZFRleHQiLCJ0aGVuIiwiY2xpcFRleHQiLCJjbGlwVGV4dE9iaiIsInBhcnNlIiwiY2xpcFRleHRPYmpLZXlzIiwiT2JqZWN0Iiwia2V5cyIsImNvbnNvbGUiLCJsb2ciLCJyZWxvYWQiLCJlcnJvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJsZW5ndGgiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsImRhdGEiLCJpbm5lclRleHQiLCJzaGEiLCJzbGljZSIsInVzZXJBZ2VudERhdGEiLCJwbGF0Zm9ybSIsIm1vYmlsZSIsInVzZXJBZ2VudCIsImxhc3RJbmRleE9mIiwiZm9yRWFjaCIsInNldHRpbmciLCJpdGVtIiwicGFyc2VGbG9hdCIsImdldEl0ZW0iLCJjdXJyZW50VmFsdWUiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwidGl0bGVFbGVtZW50IiwiZGF0YXNldCIsInNsaWRlciIsIm9uVmFsdWVDaGFuZ2UiLCJ0b3RhbCIsInNsaWRlQmxvY2siLCJhcHBlbmRDaGlsZCIsImUiLCJvZmZzZXRYIiwib2Zmc2V0V2lkdGgiLCJhZGQiLCJpc0RyYWdTdGFydCIsIm9uTW91c2VEcmFnIiwic2V0IiwiTWF0aCIsInJvdW5kIiwicGFnZVgiLCJjbGllbnRMZWZ0IiwiY2xpZW50V2lkdGgiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib25Ub3VjaERyYWciLCJ0YXJnZXRUb3VjaGVzIiwiZWxlbWVudCIsIm5ld1ZhbHVlIiwic3R5bGUiLCJtYXJnaW5MZWZ0IiwiU2xpZGVyIiwidmFsdWUiLCJnZXRWYWx1ZSIsIlNsaWRlckl0ZW0iLCJpc0NoZWNrZWQiLCJ0b2dnbGVFbGVtZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiVG9nZ2xlSXRlbSIsImJ1dHRvbiIsIm9uY2xpY2siLCJCdXR0b25JdGVtIiwiRXJyb3IiLCJnZXRFbGVtZW50QnlJZCJdLCJzb3VyY2VSb290IjoiIn0=